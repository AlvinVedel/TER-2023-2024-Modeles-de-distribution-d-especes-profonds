<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js" integrity="sha512-M7nHCiNUOwFt6Us3r8alutZLm9qMt4s9951uo8jqO4UwJ1hziseL6O3ndFyigx6+LREfZqnhHxYjKRJ8ZQ69DQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="../Visualisation/jquery-3.7.1.min.js"></script>
 <!--  <script src="http://d3js.org/d3.v3.js" type="text/javascript"></script> --> 
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script src="./carte.js"></script>
    <script src="./pa.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <title>Carte</title>
</head>
<body>
    <div id="global" class="container-fluid">
        <div class="row">
            <div id="carte" class="col-lg-12">
                <h1> Carte des observations</h1>
                <svg id="svgCarte">
                </svg>
            </div>
        </div>
        <div class="row">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="row">
                            <label>
                                <input type="checkbox" name="categorie" value="pa" checked onclick="afficherPA()">
                                Présences / Absences
                            </label>
                        </div>
                    </br>
                    <br>
                        <div class="row">
                            <label>
                                <input type="checkbox" name="categorie" value="toguess" onclick="afficherPA_toguess()">
                                Points à prédire
                            </label>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="container">
                            <div class="row">
                                <input type="radio" id="knn" name="models" value="KNN spatial" onclick="changerModel('knn')">
                                <label for="knn">KNN spatial</label>
                            </div>
                            <div class="row">
                                <input type="radio" id="knn_abiotique" name="models" value="KNN abiotique" onclick="changerModel('knn_abiotique')">
                                <label for="knn_abiotique">KNN abiotique</label>
                            </div>
                            <div class="row">
                                <input type="radio" id="random_forest" name="models" value="Random Forest" onclick="changerModel('random_forest')" checked>
                                <label for="random_forest">Random Forest</label>
                            </div>
                            <div class="row">
                                <input type="radio" id="svm" name="models" value="SVM abiotique" onclick="changerModel('svm')">
                                <label for="svm">SVM</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div id="infos"> 
                            <h1> Espèces présentes </h1>
                            <p id="especes"> </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <script>
        let svgWidth = 1800;  // Remplacez par la largeur souhaitée
        let svgHeight = 700;  // Remplacez par la hauteur souhaitée

        // Sélectionnez le conteneur SVG et définissez sa largeur et sa hauteur
        let svg = d3.select("#svgCarte")
            .attr("width", svgWidth)
            .attr("height", svgHeight);

            


        var gGlobal = svg.append("g");

        var gCarte = gGlobal.append("g");

        var gTriangles = gGlobal.append("g");
        var gTriangles2 = gGlobal.append("g");

            // Créez un générateur de chemins pour convertir les coordonnées géographiques en coordonnées SVG
        var zoom = d3.zoom()
                    .scaleExtent([1, 8])  // Définissez les échelles maximale et minimale du zoom
                    .on("zoom", function (event) {
                        gGlobal.attr("transform", event.transform);
                    });

                // Appliquez le zoom à l'élément SVG
                svg.call(zoom);


        let projection = d3.geoMercator()
                .scale(400)
                .center([40, 46])  // Ajustez ces valeurs pour le centrage souhaité
                .translate([svgWidth / 2, svgHeight / 2]) // Centrez la carte autour de l'Europe

        initCarte(gCarte, projection);
        initPA(gTriangles, gTriangles2, "random forest");


    </script>
    
</body>
</html>